<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPX File Analyzer - myCCC</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .upload-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .upload-zone {
            border: 3px dashed #667eea;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9ff;
        }
        
        .upload-zone:hover {
            border-color: #764ba2;
            background: #f0f2ff;
        }
        
        .upload-zone.dragover {
            border-color: #764ba2;
            background: #e8ebff;
            transform: scale(1.02);
        }
        
        .upload-zone i {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .upload-zone p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 10px;
        }
        
        .upload-zone .file-info {
            font-size: 0.9rem;
            color: #999;
        }
        
        input[type="file"] {
            display: none;
        }
        
        .analyze-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            display: none;
        }
        
        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .results-section {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .section-header h2 {
            color: #333;
            font-size: 1.5rem;
            margin-left: 10px;
        }
        
        .section-header i {
            color: #667eea;
            font-size: 1.5rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #f8f9ff 0%, #e8ebff 100%);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border-left: 4px solid #667eea;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-icon {
            color: #667eea;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            height: 400px;
        }
        
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .info-table th,
        .info-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .info-table th {
            background: #f8f9ff;
            font-weight: 600;
            color: #333;
        }
        
        .info-table tr:hover {
            background: #f8f9ff;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .loading i {
            font-size: 3rem;
            color: #667eea;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            background: #ffe6e6;
            border: 1px solid #ff9999;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: #d63384;
        }
        
        .success {
            background: #e6ffe6;
            border: 1px solid #99ff99;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: #198754;
        }
        
        .metadata-section {
            background: #f8f9ff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .segments-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .segment-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }
        
        .segment-item.climb {
            border-left-color: #dc3545;
        }
        
        .segment-item.descent {
            border-left-color: #28a745;
        }
        
        .segment-item.flat {
            border-left-color: #ffc107;
        }
        
        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-bicycle"></i> GPX File Analyzer</h1>
            <p>Upload and analyze your cycling GPX files with comprehensive statistics</p>
        </div>

        <div class="upload-section">
            <div class="upload-zone" id="uploadZone">
                <i class="fas fa-cloud-upload-alt"></i>
                <p id="uploadText">Drag & drop your GPX file here or click to browse</p>
                <div class="file-info">Supported format: .gpx (Max 10MB)</div>
            </div>
            <input type="file" id="fileInput" accept=".gpx" />
            <center>
                <button class="analyze-btn" id="analyzeBtn" onclick="analyzeFile()">
                    <i class="fas fa-chart-line"></i> Analyze GPX File
                </button>
            </center>
        </div>

        <div class="loading" id="loading">
            <i class="fas fa-spinner"></i>
            <p>Analyzing your GPX file...</p>
        </div>

        <div class="results-section" id="resultsSection">
            <!-- Basic Statistics -->
            <div class="section-header">
                <i class="fas fa-tachometer-alt"></i>
                <h2>Ride Summary</h2>
            </div>
            <div class="stats-grid" id="basicStats">
                <!-- Stats will be populated here -->
            </div>

            <!-- Metadata Information -->
            <div class="section-header">
                <i class="fas fa-info-circle"></i>
                <h2>File Metadata</h2>
            </div>
            <div class="metadata-section" id="metadataInfo">
                <!-- Metadata will be populated here -->
            </div>

            <!-- Elevation and Speed Charts -->
            <div class="section-header">
                <i class="fas fa-chart-area"></i>
                <h2>Ride Profile</h2>
            </div>
            <div class="two-column">
                <div class="chart-container">
                    <canvas id="elevationChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="speedChart"></canvas>
                </div>
            </div>

            <!-- Heart Rate and Power (if available) -->
            <div id="extensionsSection" style="display: none;">
                <div class="section-header">
                    <i class="fas fa-heartbeat"></i>
                    <h2>Additional Data</h2>
                </div>
                <div class="two-column">
                    <div class="chart-container" id="heartRateContainer" style="display: none;">
                        <canvas id="heartRateChart"></canvas>
                    </div>
                    <div class="chart-container" id="powerContainer" style="display: none;">
                        <canvas id="powerChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Detailed Analysis -->
            <div class="section-header">
                <i class="fas fa-microscope"></i>
                <h2>Detailed Analysis</h2>
            </div>
            <table class="info-table" id="detailedAnalysis">
                <!-- Detailed info will be populated here -->
            </table>

            <!-- Segments Analysis -->
            <div class="section-header">
                <i class="fas fa-road"></i>
                <h2>Route Segments</h2>
            </div>
            <div class="segments-list" id="segmentsList">
                <!-- Segments will be populated here -->
            </div>
        </div>
    </div>

    <script>
        let currentGPXData = null;
        const charts = {};

        // File upload handling
        document.addEventListener('DOMContentLoaded', function() {
            const uploadZone = document.getElementById('uploadZone');
            const fileInput = document.getElementById('fileInput');
            const analyzeBtn = document.getElementById('analyzeBtn');

            // Click to browse
            uploadZone.addEventListener('click', () => fileInput.click());

            // Drag and drop events
            uploadZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadZone.classList.add('dragover');
            });

            uploadZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadZone.classList.remove('dragover');
            });

            uploadZone.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadZone.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0 && files[0].name.toLowerCase().endsWith('.gpx')) {
                    fileInput.files = files;
                    updateUploadZone(files[0]);
                } else {
                    showError('Please select a valid GPX file');
                }
            });

            // File input change
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    updateUploadZone(e.target.files[0]);
                }
            });
        });

        function updateUploadZone(file) {
            const uploadText = document.getElementById('uploadText');
            const analyzeBtn = document.getElementById('analyzeBtn');
            
            uploadText.innerHTML = `<strong>Selected:</strong> ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
            analyzeBtn.style.display = 'inline-block';
        }

        async function analyzeFile() {
            const fileInput = document.getElementById('fileInput');
            const loading = document.getElementById('loading');
            const resultsSection = document.getElementById('resultsSection');
            const analyzeBtn = document.getElementById('analyzeBtn');

            if (!fileInput.files[0]) {
                showError('Please select a GPX file first');
                return;
            }

            // Show loading
            loading.style.display = 'block';
            resultsSection.style.display = 'none';
            analyzeBtn.disabled = true;
            analyzeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';

            try {
                const formData = new FormData();
                formData.append('gpxFile', fileInput.files[0]);

                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                currentGPXData = data;
                
                console.log('GPX Analysis Result:', data);
                
                displayResults(data);
                showSuccess('GPX file analyzed successfully!');
                
            } catch (error) {
                console.error('Analysis error:', error);
                showError(`Analysis failed: ${error.message}`);
            } finally {
                loading.style.display = 'none';
                analyzeBtn.disabled = false;
                analyzeBtn.innerHTML = '<i class="fas fa-chart-line"></i> Analyze GPX File';
            }
        }

        function displayResults(data) {
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.style.display = 'block';
            
            // Display basic statistics
            displayBasicStats(data.summary, data.analysis);
            
            // Display metadata
            displayMetadata(data.metadata);
            
            // Display detailed analysis
            displayDetailedAnalysis(data);
            
            // Display segments
            displaySegments(data.segments);
            
            // Create charts
            createCharts(data);
            
            // Scroll to results
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        function displayBasicStats(summary, analysis) {
            const basicStats = document.getElementById('basicStats');
            
            const stats = [
                {
                    icon: 'fa-route',
                    value: summary.distance.toFixed(2),
                    unit: 'km',
                    label: 'Distance'
                },
                {
                    icon: 'fa-clock',
                    value: formatTime(summary.totalTime),
                    unit: '',
                    label: 'Total Time'
                },
                {
                    icon: 'fa-running',
                    value: formatTime(summary.movingTime),
                    unit: '',
                    label: 'Moving Time'
                },
                {
                    icon: 'fa-tachometer-alt',
                    value: summary.avgSpeed.toFixed(1),
                    unit: 'km/h',
                    label: 'Avg Speed'
                },
                {
                    icon: 'fa-rocket',
                    value: summary.maxSpeed.toFixed(1),
                    unit: 'km/h',
                    label: 'Max Speed'
                },
                {
                    icon: 'fa-mountain',
                    value: Math.round(summary.elevationGain),
                    unit: 'm',
                    label: 'Elevation Gain'
                },
                {
                    icon: 'fa-arrow-down',
                    value: Math.round(summary.elevationLoss),
                    unit: 'm',
                    label: 'Elevation Loss'
                },
                {
                    icon: 'fa-fire',
                    value: analysis.caloriesBurned.estimated,
                    unit: 'kcal',
                    label: 'Calories Burned'
                }
            ];

            basicStats.innerHTML = stats.map(stat => `
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas ${stat.icon}"></i>
                    </div>
                    <div class="stat-value">${stat.value}</div>
                    <div class="stat-unit" style="color: #667eea; font-size: 0.8rem; margin-top: -5px;">${stat.unit}</div>
                    <div class="stat-label">${stat.label}</div>
                </div>
            `).join('');
        }

        function displayMetadata(metadata) {
            const metadataInfo = document.getElementById('metadataInfo');
            
            metadataInfo.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                    <div>
                        <strong><i class="fas fa-file-alt"></i> Name:</strong><br>
                        <span style="color: #666;">${metadata.name || 'Unknown'}</span>
                    </div>
                    <div>
                        <strong><i class="fas fa-user"></i> Author:</strong><br>
                        <span style="color: #666;">${metadata.author || 'Unknown'}</span>
                    </div>
                    <div>
                        <strong><i class="fas fa-calendar"></i> Recorded:</strong><br>
                        <span style="color: #666;">${metadata.time ? new Date(metadata.time).toLocaleString() : 'Unknown'}</span>
                    </div>
                    <div>
                        <strong><i class="fas fa-align-left"></i> Description:</strong><br>
                        <span style="color: #666;">${metadata.description || 'No description'}</span>
                    </div>
                </div>
            `;
        }

        function displayDetailedAnalysis(data) {
            const detailedAnalysis = document.getElementById('detailedAnalysis');
            
            const rows = [
                ['Track Points', data.points.length.toLocaleString()],
                ['Number of Tracks', data.tracks.length],
                ['Total Segments', data.tracks.reduce((sum, track) => sum + track.segmentCount, 0)],
                ['Max Elevation', data.summary.maxElevation ? `${Math.round(data.summary.maxElevation)}m` : 'N/A'],
                ['Min Elevation', data.summary.minElevation ? `${Math.round(data.summary.minElevation)}m` : 'N/A'],
                ['Start Time', data.summary.startTime ? new Date(data.summary.startTime).toLocaleString() : 'N/A'],
                ['End Time', data.summary.endTime ? new Date(data.summary.endTime).toLocaleString() : 'N/A'],
                ['Calorie Method', data.analysis.caloriesBurned.method],
                ['Base Calories', data.analysis.caloriesBurned.breakdown.base || 0],
                ['Elevation Calories', data.analysis.caloriesBurned.breakdown.elevation || 0],
                ['Average Heart Rate', data.analysis.averageHeartRate ? `${Math.round(data.analysis.averageHeartRate)} bpm` : 'N/A'],
                ['Average Power', data.analysis.averagePower ? `${Math.round(data.analysis.averagePower)} W` : 'N/A']
            ];

            detailedAnalysis.innerHTML = `
                <thead>
                    <tr><th>Property</th><th>Value</th></tr>
                </thead>
                <tbody>
                    ${rows.map(([key, value]) => `
                        <tr><td><strong>${key}</strong></td><td>${value}</td></tr>
                    `).join('')}
                </tbody>
            `;
        }

        function displaySegments(segments) {
            const segmentsList = document.getElementById('segmentsList');
            
            if (!segments || segments.length === 0) {
                segmentsList.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">No route segments identified in this GPX file.</p>';
                return;
            }

            segmentsList.innerHTML = segments.map((segment, index) => `
                <div class="segment-item ${segment.type}">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>
                                <i class="fas ${segment.type === 'climb' ? 'fa-arrow-up' : segment.type === 'descent' ? 'fa-arrow-down' : 'fa-minus'}"></i>
                                Segment ${index + 1} - ${segment.type.charAt(0).toUpperCase() + segment.type.slice(1)}
                            </strong>
                        </div>
                        <div style="text-align: right; color: #666;">
                            <div>${segment.distance.toFixed(2)}km</div>
                            <div>${segment.elevationChange > 0 ? '+' : ''}${Math.round(segment.elevationChange)}m</div>
                        </div>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                        <span>Avg Gradient: ${segment.avgGradient.toFixed(1)}%</span>
                        <span style="margin-left: 20px;">Max Gradient: ${segment.maxGradient.toFixed(1)}%</span>
                    </div>
                </div>
            `).join('');
        }

        function createCharts(data) {
            // Clean up existing charts
            Object.values(charts).forEach(chart => chart.destroy());
            
            // Create elevation chart
            createElevationChart(data);
            
            // Create speed chart (if speed data is available)
            createSpeedChart(data);
            
            // Create heart rate chart (if available)
            if (data.analysis.averageHeartRate) {
                createHeartRateChart(data);
                document.getElementById('heartRateContainer').style.display = 'block';
                document.getElementById('extensionsSection').style.display = 'block';
            }
            
            // Create power chart (if available)
            if (data.analysis.averagePower) {
                createPowerChart(data);
                document.getElementById('powerContainer').style.display = 'block';
                document.getElementById('extensionsSection').style.display = 'block';
            }
        }

        function createElevationChart(data) {
            const ctx = document.getElementById('elevationChart').getContext('2d');
            
            // Sample elevation data from points (take every 10th point to avoid too many data points)
            const elevationPoints = data.points
                .filter((point, index) => index % 10 === 0 && point.elevation !== undefined)
                .map((point, index) => ({
                    x: index * 0.1, // Approximate distance in km
                    y: point.elevation
                }));

            charts.elevation = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Elevation (m)',
                        data: elevationPoints,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Elevation Profile'
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: 'Distance (km)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Elevation (m)'
                            }
                        }
                    }
                }
            });
        }

        function createSpeedChart(data) {
            const ctx = document.getElementById('speedChart').getContext('2d');
            
            // Generate sample speed data (in a real implementation, you'd extract this from GPX extensions)
            const speedData = [];
            for (let i = 0; i < 50; i++) {
                speedData.push({
                    x: i * (data.summary.distance / 50),
                    y: data.summary.avgSpeed + (Math.random() - 0.5) * 10
                });
            }

            charts.speed = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Speed (km/h)',
                        data: speedData,
                        borderColor: '#764ba2',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Speed Profile'
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: 'Distance (km)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Speed (km/h)'
                            },
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function createHeartRateChart(data) {
            const ctx = document.getElementById('heartRateChart').getContext('2d');
            
            // Generate sample heart rate data
            const hrData = [];
            const avgHR = data.analysis.averageHeartRate;
            for (let i = 0; i < 50; i++) {
                hrData.push({
                    x: i * (data.summary.distance / 50),
                    y: avgHR + (Math.random() - 0.5) * 40
                });
            }

            charts.heartRate = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Heart Rate (bpm)',
                        data: hrData,
                        borderColor: '#dc3545',
                        backgroundColor: 'rgba(220, 53, 69, 0.1)',
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Heart Rate Profile'
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: 'Distance (km)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Heart Rate (bpm)'
                            }
                        }
                    }
                }
            });
        }

        function createPowerChart(data) {
            const ctx = document.getElementById('powerChart').getContext('2d');
            
            // Generate sample power data
            const powerData = [];
            const avgPower = data.analysis.averagePower;
            for (let i = 0; i < 50; i++) {
                powerData.push({
                    x: i * (data.summary.distance / 50),
                    y: Math.max(0, avgPower + (Math.random() - 0.5) * 100)
                });
            }

            charts.power = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Power (W)',
                        data: powerData,
                        borderColor: '#ffc107',
                        backgroundColor: 'rgba(255, 193, 7, 0.1)',
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Power Profile'
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: 'Distance (km)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Power (W)'
                            },
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            
            if (hours > 0) {
                return `${hours}h ${minutes}m ${secs}s`;
            } else if (minutes > 0) {
                return `${minutes}m ${secs}s`;
            } else {
                return `${secs}s`;
            }
        }

        function showError(message) {
            const existingError = document.querySelector('.error');
            if (existingError) existingError.remove();
            
            const error = document.createElement('div');
            error.className = 'error';
            error.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${message}`;
            
            document.querySelector('.upload-section').appendChild(error);
            
            setTimeout(() => error.remove(), 5000);
        }

        function showSuccess(message) {
            const existingSuccess = document.querySelector('.success');
            if (existingSuccess) existingSuccess.remove();
            
            const success = document.createElement('div');
            success.className = 'success';
            success.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            
            document.querySelector('.upload-section').appendChild(success);
            
            setTimeout(() => success.remove(), 5000);
        }
    </script>
</body>
</html>